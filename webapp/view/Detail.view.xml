<mvc:View xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.ui.layout.form"
    xmlns:sf="sap.f"
    xmlns:card="sap.f.cards"
    xmlns="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:m="sap.m"
    xmlns:mc="sap.suite.ui.microchart"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:grid="sap.ui.layout.cssgrid"
    controllerName="edu.be.ap.hr.zsd002hr.controller.Detail">
    <ObjectPageLayout id="ObjectPageLayout" showFooter="true" showTitleInHeaderContent="true"
        showEditHeaderButton="true" editHeaderButtonPress="handleEditBtnPress"
        upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <actions>
                    <m:ToggleButton press=".toggleFullScreen" icon="sap-icon://expand"
                        type="Transparent" />
                    <m:Button press=".onCloseDetailPress" icon="sap-icon://decline"
                        type="Transparent" />
                </actions>

                <expandedHeading>
                    <m:HBox>
                        <m:Title text="{json>/Personnel/First_name} {json>/Personnel/Last_name}"
                            wrapping="true" />
                    </m:HBox>
                </expandedHeading>

                <snappedHeading>
                    <m:FlexBox fitContainer="true" alignItems="Center">
                        <m:Avatar initials="{json>/Personnel/to_info/Initials}" displaySize="S"
                            class="sapUiTinyMarginEnd" />
                        <m:Title text="{json>/Personnel/First_name} {json>/Personnel/Last_name}"
                            wrapping="true" />
                    </m:FlexBox>
                </snappedHeading>

                <expandedContent>
                    <m:Title text="{json>/Personnel/Function}" />
                </expandedContent>

                <snappedContent>
                    <m:Title text="{json>/Personnel/Function}" />
                </snappedContent>

                <snappedTitleOnMobile>
                    <m:Title text="{json>/Personnel/Function}" />
                </snappedTitleOnMobile>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <m:FlexBox wrap="Wrap">
                <m:Avatar initials="{json>/Personnel/to_info/Initials}" displaySize="L" />

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <m:Text text="{json>/Personnel/to_info/Phone_nr}" />
                    <m:Text text="{json>/Personnel/to_info/Mail}" />
                </layout:VerticalLayout>

                <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                    <m:Label text="{json>/Personnel/Department}" />
                    <m:Label text="ID: {json>/Personnel/Pers_nr}" />

                </layout:VerticalLayout>
            </m:FlexBox>
        </headerContent>

        <sections>
            <ObjectPageSection titleUppercase="false" id="persInfoSection"
                title="Personal information">
                <subSections>
                    <ObjectPageSubSection id="perInfoSectionSubSect">
                        <core:Fragment fragmentName="edu.be.ap.hr.zsd002hr.view.fragment.Display"
                            type="XML" />
                        <core:Fragment fragmentName="edu.be.ap.hr.zsd002hr.view.fragment.Change"
                            type="XML" />
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection titleUppercase="false" id="careerSection" title="Career">
                <subSections>
                    <ObjectPageSubSection id="careerSectionSS1">
                        <m:List
                            id="list"
                            width="auto"
                            class="sapFDynamicPageAlignContent"
                            items="{path: 'func>/Functions/'}"
                            busyIndicatorDelay="{listView>/delay}"
                            noDataText="{listView>/noDataText}"
                            mode="{= ${device>/system/phone} ? 'None' : 'SingleSelectMaster'}"
                            growing="true"
                            growingScrollToLoad="true"
                            updateFinished=".onUpdateFinished"
                            selectionChange=".onSelectionChange"
                        >

                        <m:items>
                            <m:ObjectListItem id="_IDGenObjectListItem1"
                                title="{func>Plstx}"
                                type="Navigation"
                                press=".onSelectionChange">
        
                            <m:ObjectAttribute id="_IDGenObjectAttribute1"  
                                text="{func>Plans}" />
        
                            </m:ObjectListItem>                    
                        </m:items>

                        </m:List>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection titleUppercase="false" id="paySection" title="Compensation">
                <subSections>
                    <ObjectPageSubSection id="paySectionSS1" title="payments">
                        <l:HorizontalLayout class="sapUiContentPadding">
                            <sf:Card class="sapUiMediumMargin" width="175px">
                                <sf:header>
                                    <card:Header
                                        title="Date:  { 
                                        path: 'pay>/Payslip/0/SlipDate',
                                        type: 'sap.ui.model.type.DateTime',
                                        formatOptions: { style: 'Short',
                                          pattern: 'dd/MM/yy' 
                                        }  
                                      }"
                                        subtitle="{pay>/Payslip/0/PerformanceAmount} {pay>/Payslip/0/Currency}"
                                        iconSrc="sap-icon://payment-approval" />
                                </sf:header>
                            </sf:Card>
                            <sf:Card class="sapUiMediumMargin" width="175px">
                                <sf:header>
                                    <card:Header
                                        title="Date:  { 
                                        path: 'pay>/Payslip/1/SlipDate',
                                        type: 'sap.ui.model.type.DateTime',
                                        formatOptions: { style: 'Short',
                                          pattern: 'dd/MM/yy' 
                                        }  
                                      }"
                                        subtitle="{pay>/Payslip/1/PerformanceAmount} {pay>/Payslip/1/Currency}"
                                        iconSrc="sap-icon://payment-approval" />
                                </sf:header>
                            </sf:Card>
                            <!-- visible="{= ${pay>/Payslip/2/SlipDate} == null  ? true : false }" -->
                            <sf:Card class="sapUiMediumMargin" width="175px">
                                <sf:header>
                                    <card:Header
                                        title="Date:  { 
                                        path: 'pay>/Payslip/1/SlipDate',
                                        type: 'sap.ui.model.type.DateTime',
                                        formatOptions: { style: 'Short',
                                          pattern: 'dd/MM/yy' 
                                        }  
                                      }"
                                        subtitle="{pay>/Payslip/1/PerformanceAmount} {pay>/Payslip/1/Currency}"
                                        iconSrc="sap-icon://payment-approval" />
                                </sf:header>
                            </sf:Card>
                        </l:HorizontalLayout>
                    </ObjectPageSubSection>
                    <ObjectPageSubSection id="paySectionSS2" title="salary &amp; bonus">
                        <mc:BulletMicroChart size="L" scale="M" targetValue="100"
                            forecastValue="110" class="sapUiSmallMargin" press="press">
                            <mc:actual>
                                <mc:BulletMicroChartData value="120" color="Good" />
                            </mc:actual>
                            <mc:thresholds>
                                <mc:BulletMicroChartData value="0" color="Error" />
                                <mc:BulletMicroChartData value="50" color="Critical" />
                                <mc:BulletMicroChartData value="150" color="Critical" />
                                <mc:BulletMicroChartData value="200" color="Error" />
                            </mc:thresholds>
                        </mc:BulletMicroChart>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>

            <!-- <ObjectPageSection titleUppercase="false" id="employmentSection"
            title="Employment">
                <subSections>
                    <ObjectPageSubSection
            id="employmentSectionSS1" title="Job information" titleUppercase="false">
                        <blocks
            />
                    </ObjectPageSubSection>

                    <ObjectPageSubSection
            id="employmentSectionSS2" title="Employee Details" importance="Medium"
            titleUppercase="false">
                        <blocks />
                        <moreBlocks
            />
                    </ObjectPageSubSection>

                    <ObjectPageSubSection
            id="employmentSectionSS3" title="Job Relationship" importance="Low"
            titleUppercase="false">
                        <blocks />
                    </ObjectPageSubSection>
            </subSections>
            </ObjectPageSection> -->
        </sections>

        <footer>
            <m:Bar>
                <m:contentRight>
                    <m:Button id="edit" text="Edit" press="handleEditPress"
                        visible="{= !${detailView>/edit} }" />
                    <!-- <m:Button id="edit" text="Edit"
                    press="handleEditPress({json>/Personnel/PersNr})" visible="{=
                    !${detailView>/edit} }"/> -->
                    <m:Button id="save" text="Save" type="Emphasized" press="handleSavePress"
                        visible="{detailView>/edit}" />
                    <m:Button id="cancel" text="Cancel" press="handleCancelPress"
                        visible="{detailView>/edit}" />
                </m:contentRight>
            </m:Bar>
        </footer>
    </ObjectPageLayout>
</mvc:View>